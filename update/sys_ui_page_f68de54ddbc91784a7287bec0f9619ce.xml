<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[var app = angular.module('homeApp',[]);

app.controller('homeAppCtrl',function($scope,$http){
	
	$scope.client_id = "";
	$scope.client_secret = "";
	
	$scope.removeAllAlerts = function(){
		jQuery('#cred_success').addClass('hide');
		jQuery('#cred_testing').addClass('hide');
		jQuery('#cred_failed').addClass('hide');
	};
	
	$scope.testCredentials = function(){
		$scope.removeAllAlerts();
		
		jQuery('#cred_testing').removeClass('hide');
		
		var testResults = function(response){
			var answer = response.responseXML.documentElement.getAttribute('answer');
			if(answer == 'success'){
				jQuery('#cred_testing').addClass('hide');
				jQuery('#cred_success').removeClass('hide');
			}else if(answer == 'failure'){
				jQuery('#cred_testing').addClass('hide');
				jQuery('#cred_failed').removeClass('hide');
			}
		};
		
		var authAjax = new GlideAjax('CTXAutoSrvcsAPI');
		authAjax.addParam('sysparm_name','testCredentials');
		authAjax.addParam('sysparm_client_id',$scope.client_id);
		authAjax.addParam('sysparm_client_secret',$scope.client_secret);
		authAjax.getXML(testResults);
		
	};
	
	$scope.saveInputs = function(){
		$scope.closeModel();
		var savesResult = function(response){
			var answer = response.responseXML.documentElement.getAttribute('answer');
			if(answer){
				console.log('Saved properties');
			}else{
				console.log('Unable to save properties');
			}
			
		};
		var authAjax = new GlideAjax('CTXAutoSrvcsAPI');
		authAjax.addParam('sysparm_name','updateCredentials');
		authAjax.addParam('sysparm_client_id',$scope.client_id);
		authAjax.addParam('sysparm_client_secret',$scope.client_secret);
		authAjax.getXML(savesResult);
	};
		
	$scope.openAuthModal = function(){
		jQuery(".modal").css('display','block');
	};

	$scope.closeModel = function(){
		jQuery(".modal").css('display','none');
	};

	jQuery(window).click(function(event) {
		if(event.target == jQuery(".modal")[0]){
			jQuery(".modal").css('display','none');
		}
	});

	
	jQuery(document).ready(function() {
		var maxHeight = 110;
		
		jQuery('.box-content').each(function(){
			var box = jQuery(this);
			var text = box.css('height');
			text = text.substring(0,text.length-2);			
			var height = parseInt(text) + 20;
			console.log('compare ' + height);
			if(height > maxHeight){
				maxHeight = height;
			}
		});
		jQuery('.box').each(function(){
			console.log('setting ' + maxHeight);
			var box = jQuery(this);
			box.css('min-height',maxHeight+'px');
		});
	});
	
	jQuery(window).on('resize', function(){
		
		var maxHeight = 110;
		
		jQuery('.box-content').each(function(){
			var box = jQuery(this);
			var text = box.css('height');
			text = text.substring(0,text.length-2);			
			var height = parseInt(text) + 20;
			console.log('compare ' + height);
			if(height > maxHeight){
				maxHeight = height;
			}
		});
		jQuery('.box').each(function(){
			console.log('setting ' + maxHeight);
			var box = jQuery(this);
			box.css('min-height',maxHeight+'px');
		});
	});

});]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_wcs_ctrx_auto_sv_getting_started.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
		<style>
			.alert{
				background-color:#fefefe;
				border:none;
			}
			header{
				padding-left:40px;
				padding-right:40px;
			}
			h2{
				font-weight:bold;
			}
			
			.separator{
				border:none;
				border-bottom: solid #E6E6E6 2px;
				width:100%;
				height:3px;
			
			}
			.steps{
				padding-top:20px;
			}
			
			.list-step{
				display:inline-block;
				border:none;
				width:21%;
			}
			
			.list-arrow{				
				width:5%;
				border:none;
			}
			
			.box{
				border: solid #E6E6E6 2px;				
				padding:15px;
				min-height: 110px;	
				max-width:600px;
				overflow:auto;						
			}
			
			.box-icon{			
				padding:0;
				position: absolute;
				top:35px;
				left:10px;
				
			}
			
			.box-content{
				padding:0;
				position: absolute;
				top:10px;
				left:50px;
				margin-right:20px;
			}

			
			.started{
				border:none;
				border-radius:5px;
				padding-left:35px;
				padding-right:35px;
				margin-left: 25px;
				margin-top: 10px;
				font-size:13px;
				
			}
			
			.arrow{
				padding-top:1%;
				padding-left:0;
				padding-right:0;
				max-width:150px;
			
			}
			.arrows{
				padding-left:45%;
				content: "\203A";
				font-size:50px;
			    color:#E6E6E6;
				
			}

			/* The Modal (background) */
			.modal {
				display: none; /* Hidden by default */
				position: fixed; /* Stay in place */
				z-index: 1; /* Sit on top */
				padding-top: 100px; /* Location of the box */
				left: 0;
				top: 0;
				width: 100%; /* Full width */
				height: 100%; /* Full height */
				overflow: auto; /* Enable scroll if needed */
				background-color: rgb(0,0,0); /* Fallback color */
				background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
			}

			/* Modal Content */
			.modal-content {
				background-color: #fefefe;
				margin: auto;
				padding: 20px;
				border: 1px solid #888;
				width: 80%;
			}

			/* The Close Button */
			.closebtn {
				color: #343d47; ($color-darkest)
				width: 10px;
				height: 10px;
				padding:0;
				min-height:10px;
			}

			.closebtn:hover,
			.closebtn:focus {
				color: #000;
				text-decoration: none;
				cursor: pointer;
			}
			
			.modal_button{
				width:100%;
			}
			
			.modal_label{
				text-align:left;
			}
			
			.form-groups{
				padding-left:20px;
				padding-right:20px;
			}
		
			.bottom_right{
				position:absolute;
				bottom:0;
				right:0;
			}
			
			.no_left_pad{
				padding-left:0;
			}
		</style>
	</head>
	<body ng-app="homeApp" ng-controller="homeAppCtrl">
		<header>
			
			<div class="col-md-12 ">
				<div class="col-md-12 no_left_pad">
					<h2>Citrix Automation Guided Setup</h2>
					<h3>Getting Started</h3>
				</div>
				<div class="col-md-12">
					<div class="col-md-9 no_left_pad">
						<h5>Welcome to Citrix Automation Service setup. You don't have any Citrix Cloud Workspace Automation Service <br/>
							linked to ServiceNow, follow the instructions below to get the workspace automation service up and running. 
						</h5>
					</div>
					<div class="col-md-2">
						<button class="btn btn-lg btn-info started">
							Getting Started
						</button>
					</div>
					
				</div>
				
			</div>
			<div class="col-md-11 col-sm-12">
				<div class="col-md-12 col-sm-12 separator">
				</div>
			</div>	
		
			<div class="col-md-12 steps container">		
				<div class="col-md-2 col-sm-12 box">
					<div class="box-icon">
						<img src="subscribe_icon.png" width="29" height="24"/>
					</div>
					<div class="box-content">				
						<p><strong>Subscribe</strong></p>
						Go to$[SP]<a href="#">Citrix Cloud</a>$[SP]and
						subscribe to Workspace
						Automation Service (WAS) 
					</div>
				</div>
				<div class="col-md-1 col-sm-12 arrow">
					<span class="arrows">&#8250;</span>
				</div>
				<div class="col-md-2 col-sm-12 box">
					<div class="box-icon">
						<img src="authenticate_icon.png" width="20" height="28"/>
					</div>
					<div class="box-content">
						<p><strong>Authenticate</strong></p>
						
						<a id="auth_link" href="#" ng-click="openAuthModal()">
							Authenticate the citrix cloud
						</a>$[SP] account by providing client id and secret.
						
					</div>								
				</div>
				<div class="col-md-1 col-sm-12 arrow">
					<span class="arrows">&#8250;</span>
				</div>
				<div class="col-md-2 col-sm-12 box">
					<div class="box-icon">
						<img src="configure_icon.png" width="27" height="27"/>
					</div>
					<div class="box-content">
						<p><strong>Configure</strong></p>
							
						Configure WAS service
						and provide the link to
						this instance.
					</div>
				</div>
				<div class="col-md-1 col-sm-12 arrow">
					<span class="arrows">&#8250;</span>
				</div>
				<div class="col-md-2 col-sm-12 box">
					<div class="box-icon">
						<img src="verify_icon.png" width="26" height="26"/>
					</div>
					<div class="box-content">
						<p><strong>Verify</strong></p>
						Verify that connection is
						established from Service Now.
						You can then start using it.
					</div>
				</div>

			</div>
		</header>
		
		<div class="modal-example">
			<div class="modal">
				<div class="modal-dialog small-modal">
					<div class="modal-content">
						<div class="modal-header">
							<button data-dismiss="modal" class="closebtn icon-cross pull-right" ng-click="closeModel()">
							 <span class="sr-only">Close</span>
							</button>
							<h4 class="modal-title">Citrix Could Authentication</h4>
						</div>
						<div class="modal-body">
							<div class="row">
								<div class="col-sm-12">
									<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed.</p>
								</div>
							</div>
							<div class="row">
								<div class="form-groups form-horizontal">
									<div class="form-group">
										<label for="client_id" class="col-sm-3 modal_label">Client ID</label>
										<div class="col-sm-12">
											<input type="text" class="form-control" id="client_id" ng-model="client_id"/>
										</div>
									</div>
									<div class="form-group">
										<label for="client_secret" class="col-sm-3 modal_label">Secret</label>
										<div class="col-sm-12">
											<input type="text" class="form-control" id="client_secret" ng-model="client_secret"/>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<div class="row">
								<div class="col-sm-4">
									<button class="modal_button btn btn-md btn-default" ng-click="closeModel()">Cancel</button>
								</div>
								<div class="col-sm-4">
									<button class="modal_button btn btn-md btn-default" ng-click="testCredentials()">Test</button>
								</div>
								<div class="col-sm-4">
									<button class="modal_button btn btn-md btn-primary" ng-click="saveInputs()">Save</button>
								</div>
								
							</div>
							
						</div>
						<div id="cred_success" class="alert alert-success hide" role="alert">
						  Success!
						</div>
						<div id="cred_testing" class="alert alert-info hide" role="alert">
						  Testing Credentials...
						</div>							
						<div id="cred_failed" class="alert alert-danger hide" role="alert">
						  Credentials Failed!
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
		

</j:jelly>]]></html>
        <name>getting_started</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>sebastiang</sys_created_by>
        <sys_created_on>2018-03-23 02:00:18</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>f68de54ddbc91784a7287bec0f9619ce</sys_id>
        <sys_mod_count>276</sys_mod_count>
        <sys_name>getting_started</sys_name>
        <sys_package display_value="Citrix Automation Services" source="x_wcs_ctrx_auto_sv">790cd3e8db8513406d3c72fc0f961915</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Citrix Automation Services">790cd3e8db8513406d3c72fc0f961915</sys_scope>
        <sys_update_name>sys_ui_page_f68de54ddbc91784a7287bec0f9619ce</sys_update_name>
        <sys_updated_by>sebastiang</sys_updated_by>
        <sys_updated_on>2018-04-05 15:37:39</sys_updated_on>
    </sys_ui_page>
</record_update>
